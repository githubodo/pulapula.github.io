<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Generic Stream Player with Shaka + SW</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.6/shaka-player.compiled.js"></script>

    <script>
        // =====================================================
        // REGISTER SERVICE WORKER
        // =====================================================
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js')
                .then(() => console.log('Service Worker Registered'));
        }
    </script>
</head>

<body style="margin:0;background:#000;">
    <video id="video" controls autoplay style="width:100%;"></video>

    <script>
        const video = document.getElementById('video');
        const player = new shaka.Player(video);

        // =====================================================
        // CLEARKEY TEMPLATE (BRO ISI SENDIRI DI SINI)
        // =====================================================

        player.configure({
            drm: {
                clearKeys: {
                    "57833c900c4c437f82daf6785eb6ef36":"7bf4663e43cdc277b4ae18219c81d2a1","fb06bb8266fb4a998e7c4e7e90461556":"52242587d8106c4b3ed596c7a56b4e28"
                }
            }
        });

        // =====================================================
        // STREAM URL TEMPLATE
        // =====================================================

        const STREAM_MPD = "https://l01.dp.sooka.my/5099/linear/index.mpd";
        // Bro isi sendiri nanti

        // =====================================================
        // LOAD THE STREAM
        // =====================================================

        player.load(STREAM_MPD)
            .then(() => console.log("Stream Loaded"))
            .catch(err => console.error("Player Error:", err));
    </script>
</body>
</html>
